openapi: 3.0.0
info:
  description: >-
    This is the API spec for the vehicle microservice. Endpoints and parameters
    only exist for the operations getVehicle and getTechRecords. Other
    operations within the microservice are out of scope.
  version: 1.0.0
  title: Vehicles Microservice
  termsOfService: ''
  contact:
    email: bpecete@deloittece.com
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
tags:
  - name: getTechRecords
    description: >-
      Endpoints to retrieve one or more tech records. Currently we only need one
      endpoint to retrieve the current tech record of a single vehicle.
    externalDocs:
      description: Find out more
      url: 'https://wiki.i-env.net/display/HVT/Epic%3A+View+vehicle+details'
  - name: updateTechRecords
    description: >-
      Endpoint to update the tech record of a single vehicle. When updating the
      tech record, the previous one is archived and a new one with status
      'current' is created
paths:
  '/vehicles/{searchIdentifier}/tech-records':
    get:
      summary: 'Get a tech record, for a particular Vin with status specified.'
      tags:
        - getTechRecords
      parameters:
        - in: path
          name: searchIdentifier
          schema:
            type: string
            minLength: 3
            maxLength: 21
          required: true
          description: >-
            If the searchCriteria query parameter is not used or it has the "all"
            value then the searchIdentifier can be VRM, VIN, last six digits of
            the VIN or trailerId. VRM = between 3 and 8 characters, VIN = >8 characters,
            partial VIN = exactly 6 digits and trailerId = exactly 8 digits / 1 letter
            followed by exactly 6 digits.
        - in: query
          name: metadata
          schema:
            type: boolean
            description: >-
              Applicable only to ADR details. Query param for returning the list
              of values that are selectable on the front end, for the fields
              that are strings in the back end, due to the lack of data cleansing
              done for the migration. If "metadata" = "true" then GET will send
              back the metadata object, otherwise metadata object will not be returned.
        - in: query
          name: status
          schema:
            type: string
            default: provisional_over_current
            enum:
              - archived
              - current
              - provisional
              - provisional_over_current
              - all
          description: >-
            The tech record's status, the default value is
            provisional_over_current. If "status" = "provisional_over_current"
            or not provided when the GET call is done, then the current tech
            record will be retrieved only if, for the "searchIdentifier" that
            was provided, there is no "provisional" tech record, in which case
            the provisional tech record will be retrieved instead. If "status" =
            "all", then the backend will translate this into returning ALL
            technical records for that particular VIN/VRM, not just specific
            statuses
        - in: query
          name: searchCriteria
          schema:
            type: string
            default: all
            enum:
              - all
              - vin
              - vrm
              - partialVin
              - trailerId
          description: >-
            The parameter is used to specify which search criteria
            should be used. "ALL" = search identifier can be VRM, VIN, last six
            digits of the VIN or trailerId. VRM = between 3 and 8 characters,
            VIN = >8 characters, partial VIN = exactly 6 digits and trailerId =
            exactly 8 digits / 1 letter followed by exactly 6 digits. If any
            other value than "ALL" is used then the search will be done using the
            specified search criteria, without taking into account the format of the saerch identifier.
      operationId: getTechRecords
      responses:
        '200':
          description: Tech record returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/completeTechRecords'
        '401':
          description: Not authenticated
        '403':
          description: Unauthorised Access
        '404':
          description: Operation not supported
  '/vehicles/{vin}':
    put:
      summary: 'Update a tech record, for a particular VIN'
      tags:
        - updateTechRecords
      parameters:
        - in: path
          name: vin
          schema:
            type: string
            minLength: 9
            maxLength: 21
          required: true
          description: This represents the full VIN
      requestBody:
        required: true
        description: The tech record to update
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/completeTechRecordPUT'
      operationId: updateTechRecords
      responses:
        '200':
          description: Returns the updated tech record
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/completeTechRecord'
        '400':
          description: Bad request
        '401':
          description: Not authenticated
        '403':
          description: Unauthorised Access
        '404':
          description: Operation not supported
        '422':
          description: Unprocessable request
        '500':
          description: Validation Error
  '/vehicles':
    post:
      summary: 'Create a tech record'
      tags:
        - postTechRecords
      requestBody:
        required: true
        description: The tech record to create
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/completeTechRecordPOST'
      operationId: postTechRecords
      responses:
        '200':
          description: Returns the message 'Technical Record created'
          content:
            application/text:
              example: Technical Record created
        '400':
          description: Bad request
        '401':
          description: Not authenticated
        '403':
          description: Unauthorised Access
        '404':
          description: Operation not supported
        '422':
          description: Unprocessable request
        '500':
          description: Validation Error
components:
  securitySchemes:
    OAuth2:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: 'https://example.com/oauth/authorize'
          tokenUrl: 'https://example.com/oauth/token'
          scopes:
            read: Grants read access
            write: Grants write access
  schemas:
    completeTechRecords:
      type: array
      items:
        $ref: '#/components/schemas/completeTechRecord'
    completeTechRecord:
      type: object
      properties:
        systemNumber:
          type: string
          description: It defines the composed primary key, in combination with "vin".
        vrms:
          $ref: '#/components/schemas/vrms'
        vin:
          type: string
          minLength: 1
          maxLength: 21
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        trailerId:
          type: string
          maxLength: 8
          description: Used only for TRL
        techRecord:
          $ref: '#/components/schemas/techRecords'
        metadata:
          $ref: '#/components/schemas/metadata'
    vrms:
      type: array
      items:
        $ref: '#/components/schemas/vrm'
    metadata:
      type: object
      nullable: true
      description: Applicable only to ADR details. Returned only if query param "metadata" = "true", otherwise not returned
      properties:
        adrDetails:
          type: object
          properties:
            memosApplyFe:
              type: array
              items:
                type: string
                enum:
                  - 07/09 3mth leak ext
            tank:
              type: object
              properties:
                tankStatement:
                  type: object
                  properties:
                    substancesPermittedFe:
                      type: array
                      items:
                        type: string
                        enum:
                          - 'Substances permitted under the tank
                          code and any special provisions
                          specified in 9 may be carried'
                          - 'Substances (Class UN number and if
                          necessary packing group and proper shipping
                          name) may be carried'
            additionalNotes:
              type: object
              properties:
                guidanceNotesFe:
                  type: array
                  items:
                    type: string
                    enum:
                      - New certificate requested
                numberFe:
                  type: array
                  items:
                    type: string
                    enum:
                      - 1
                      - 1A
                      - 2
                      - 3
                      - V1B
                      - T1B
            permittedDangerousGoodsFe:
              type: array
              items:
                type: string
                enum:
                  - FP <61 (FL)
                  - AT
                  - Class 5.1 Hydrogen Peroxide (OX)
                  - MEMU
                  - Carbon Disulphide
                  - Hydrogen
                  - Explosives (type 2)
                  - Explosives (type 3)
            vehicleDetails:
              type: object
              properties:
                typeFe:
                  type: array
                  items:
                    type: string
                    enum:
                      - Artic tractor
                      - Rigid box body
                      - Rigid sheeted load
                      - Rigid tank
                      - Rigid skeletal
                      - Rigid battery
                      - Full drawbar box body
                      - Full drawbar sheeted load
                      - Full drawbar tank
                      - Full drawbar skeletal
                      - Full drawbar battery
                      - Centre axle box body
                      - Centre axle sheeted load
                      - Centre axle tank
                      - Centre axle skeletal
                      - Centre axle battery
                      - Semi trailer box body
                      - Semi trailer sheeted load
                      - Semi trailer tank
                      - Semi trailer skeletal
                      - Semi trailer battery

    vrm:
      type: object
      description: Used only for PSV and HGV
      properties:
        vrm:
          type: string
          minLength: 1
          maxLength: 8
        isPrimary:
          type: boolean
    completeTechRecordPUT:
      type: object
      properties:
        msUserDetails:
          type: object
          properties:
            msUser:
              type: string
            msOid:
              type: string
        techRecord:
          $ref: '#/components/schemas/techRecordsPUT_POST'
    completeTechRecordPOST:
      type: object
      properties:
        msUserDetails:
          type: object
          properties:
            msUser:
              type: string
            msOid:
              type: string
        vin:
          type: string
          minLength: 3
          maxLength: 21
        primaryVrm:
          type: string
          minLength: 3
          maxLength: 8
        secondaryVrms:
          type: array
          items:
            type: string
            minLength: 3
            maxLength: 8
        techRecord:
          $ref: '#/components/schemas/techRecordsPUT_POST'
    techRecords:
      type: array
      items:
        $ref: '#/components/schemas/techRecord'
    techRecord:
      type: object
      properties:
        createdAt:
          type: string
          format: date-time
          description: 'Used for all vehicle types'
        lastUpdatedAt:
          type: string
          format: date-time
          description: 'Used for all vehicle types'
        make:
          type: string
          maxLength: 30
          description: Used only for HGV and TRL
        model:
          type: string
          maxLength: 30
          description: Used only for HGV and TRL
        functionCode:
          type: string
          maxLength: 1
          description: Used only for HGV. Optional
        fuelPropulsionSystem:
          type: string
          enum:
            - Diesel
            - Petrol
            - Hybrid
            - Electric
            - CNG
            - Fuel cell
            - LNG
            - Other
        offRoad:
          type: boolean
        numberOfWheelsDriven:
          type: number
          maximum: 9999
          description: Used for motorcycles to derive the test codes for specialist tests.
        euVehicleCategory:
          type: string
          enum:
            - m1
            - m2
            - m3
            - n1
            - n2
            - n3
            - o1
            - o2
            - o3
            - o4
            - l1e-a
            - l1e
            - l2e
            - l3e
            - l4e
            - l5e
            - l6e
            - l7e
        emissionsLimit:
          type: number
          maximum: 99
          nullable: true
        departmentalVehicleMarker:
          type: boolean
          nullable: true
        alterationMarker:
          type: boolean
          nullable: true
        approvalType:
          type: string
          enum:
            - NTA
            - ECTA
            - IVA
            - NSSTA
            - ECSSTA
        approvalTypeNumber:
          type: string
          maxLength: 25
          nullable: true
        variantNumber:
          type: string
          maxLength: 25
          nullable: true
        variantVersionNumber:
          type: string
          maxLength: 35
          nullable: true
        grossEecWeight:
          type: number
          minLength: 0
          maxLength: 5
          nullable: true
        trainEecWeight:
          type: number
          maximum: 99999
          nullable: true
        maxTrainEecWeight:
          type: number
          maxLength: 99999
          nullable: true
        applicantDetails:
          $ref: '#/components/schemas/applicantDetailsProperties'
        microfilm:
          $ref: '#/components/schemas/microfilm'
        plates:
          $ref: '#/components/schemas/plates'
        chassisMake:
          type: string
          maxLength: 20
          description: Used only for PSV
        chassisModel:
          type: string
          maxLength: 20
          description: Used only for PSV
        bodyMake:
          type: string
          maxLength: 20
          description: Used only for PSV
        bodyModel:
          type: string
          maxLength: 20
          description: Used only for PSV
        bodyType:
          type: object
          properties:
            code:
              type: string
              enum:
                - a
                - s
                - d
                - o
                - m
                - x
                - p
                - k
                - t
                - b
                - f
                - r
                - c
            description:
              type: string
              enum:
                - articulated
                - single decker
                - double decker
                - other
                - petrol/oil tanker
                - skeletal
                - tipper
                - box
                - flat
                - refuse
                - skip loader
                - refrigerated
          description: >-
            Used for all vehicle types - PSV, HGV and TRL. o = other, a =
            articulated, m = other, s = single decker, d = double decker, x =
            other, p = petrol/oil tanker, k = skeletal, t = tipper, b = box, f =
            flat, r = refuse, s = skip loader (for HGV and TRL), c = refrigerated
        manufactureYear:
          type: number
          maximum: 9999
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        regnDate:
          type: string
          format: date
          nullable: true
        firstUseDate:
          type: string
          format: date
          nullable: true
        coifDate:
          type: string
          format: date
          description: Used only for PSV
        ntaNumber:
          type: string
          maxLength: 40
          description: 'Used for all vehicle types - PSV, HGV and TRL'
          nullable: true
        conversionRefNo:
          type: string
          maxLength: 10
          description: 'Used for all vehicle types - PSV, HGV and TRL. Optional for HGV'
          nullable: true
        seatsLowerDeck:
          type: number
          maximum: 999
          description: Used only for PSV
        seatsUpperDeck:
          type: number
          maximum: 99
          description: Used only for PSV
        standingCapacity:
          type: number
          maximum: 999
          description: Used only for PSV
        speedRestriction:
          type: number
          maximum: 99
          description: Used only for PSV
        speedLimiterMrk:
          type: boolean
          description: Used only for PSV and HGV
        tachoExemptMrk:
          type: boolean
          description: Used only for PSV and HGV
        dispensations:
          type: string
          maxLength: 160
          description: Used only for PSV
        remarks:
          type: string
          maxLength: 1024
          description: Used only for PSV
        reasonForCreation:
          type: string
          maxLength: 100
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        statusCode:
          type: string
          description: 'Used for all vehicle types - PSV, HGV and TRL'
          enum:
            - archived
            - current
            - provisional
        unladenWeight:
          type: number
          minLength: 0
          maxLength: 5
          description: Used only for PSV
        grossKerbWeight:
          type: number
          minLength: 0
          maxLength: 5
          description: Used only for PSV
        grossLadenWeight:
          type: number
          minLength: 0
          maxLength: 5
          description: Used only for PSV
        grossGbWeight:
          type: number
          minLength: 0
          maxLength: 5
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        grossDesignWeight:
          type: number
          minLength: 0
          maxLength: 5
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        trainGbWeight:
          type: number
          maximum: 99999
          description: Used only for HGV
        trainDesignWeight:
          type: number
          maximum: 99999
          description: Used only for HGV
          nullable: true
        maxTrainGbWeight:
          type: number
          maximum: 99999
          description: Used only for HGV
        maxTrainDesignWeight:
          type: number
          maximum: 99999
          description: Used only for HGV
          nullable: true
        maxLoadOnCoupling:
          type: number
          maximum: 99999
          description: Used only for TRL
        tyreUseCode:
          type: string
          maxLength: 2
          description: Used only for HGV and TRL. Optional for HGV
        roadFriendly:
          type: boolean
          description: Used only for HGV and TRL
        drawbarCouplingFitted:
          type: boolean
          description: Used only for HGV
        euroStandard:
          type: string
          description: Used only for HGV
        suspensionType:
          type: string
          maxLength: 1
          description: Used only for TRL
        couplingType:
          type: string
          maxLength: 1
          description: Used only for TRL
        dimensions:
          type: object
          properties:
            length:
              type: number
              maximum: 99999
              description: Used only for HGV and TRL
            width:
              type: number
              maximum: 99999
              description: Used only for HGV and TRL
            axleSpacing:
              type: array
              description: Used only for HGV and TRL
              items:
                type: object
                properties:
                  axles:
                    type: string
                    nullable: true
                  value:
                    type: number
                    maximum: 99999
                    description: Optional for HGV
        frontAxleTo5thWheelMin:
          type: number
          maximum: 99999
          description: Used only for HGV
        frontAxleTo5thWheelMax:
          type: number
          maximum: 99999
          description: Used only for HGV
        frontVehicleTo5thWheelCouplingMin:
          type: number
          maximum: 99999
          description: Used only for HGV. Optional for HGV
        frontVehicleTo5thWheelCouplingMax:
          type: number
          maximum: 99999
          description: Used only for HGV. Optional for HGV
        frontAxleToRearAxle:
          type: number
          maximum: 99999
          description: Used only for HGV and TRL
        rearAxleToRearTrl:
          type: number
          maximum: 99999
          description: Used only for TRL
        couplingCenterToRearAxleMin:
          type: number
          maximum: 99999
          description: Used only for TRL
        couplingCenterToRearAxleMax:
          type: number
          maximum: 99999
          description: Used only for TRL
        couplingCenterToRearTrlMin:
          type: number
          maximum: 99999
          description: Used only for TRL
        couplingCenterToRearTrlMax:
          type: number
          maximum: 99999
          description: Used only for TRL
        notes:
          type: string
          description: Used only for HGV and TRL. Optional for HGV
        noOfAxles:
          type: number
          maximum: 99
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        brakeCode:
          type: string
          maxLength: 6
          description: Used only for PSV
        adrDetails:
          $ref: '#/components/schemas/adrDetails'
        createdByName:
          type: string
          nullable: true
          description: >-
            This field gets populated with the Microsoft AD 'name', when a tech record gets created
        createdById:
          type: string
          nullable: true
          description: >-
            This attribute gets populated with the Microsoft AD 'oid', when a tech record gets created
        lastUpdatedByName:
          type: string
          description: >-
            This field gets populated with the Microsoft AD 'name', when a tech record gets updated
        lastUpdatedById:
          type: string
          description: >-
            This attribute gets populated with the Microsoft AD 'oid', when a tech record gets updated
        updateType:
          type: string
          enum:
            - adrUpdate
          description: >-
            set updateType to adrUpdate on the archived tech record, when a tech record is archived
        vehicleClass:
          type: object
          properties:
            code:
              type: string
              nullable: true
              enum:
                - '2'
                - 'n'
                - 's'
                - '1'
                - 't'
                - 'l'
                - '3'
                - 'v'
                - '4'
                - '7'
                - '5'
            description:
              type: string
              enum:
                - motorbikes over 200cc or with a sidecar
                - not applicable
                - small psv (ie: less than or equal to 22 seats)
                - motorbikes up to 200cc
                - trailer
                - large psv(ie: greater than 23 seats)
                - 3 wheelers
                - heavy goods vehicle
                - MOT class 4
                - MOT class 7
                - MOT class 5
          description: >-
            Used for all vehicle types - PSV, HGV and TRL. 2 = MotorBikes over
            200cc or with a sidecar, N = Not Applicable, S = Small PSV i.e less
            than or equal to 22 seats, 1 = Motorbikes upto 200cc, T = Trailer, L
            = LARGE PSV (ie. greater than 23 seats), 3 = 3 wheelers, V = Heavy
            Goods Vehicle
        vehicleSubclass:
          type: array
          items:
            type: string
          nullable: true
          description: Used for car and lgv.
        vehicleType:
          type: string
          enum:
            - psv
            - hgv
            - trl
            - car
            - lgv
            - motorcycle
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        vehicleSize:
          type: string
          enum:
            - small
            - large
          description: Used only for PSV
        vehicleConfiguration:
          type: string
          enum:
            - rigid
            - articulated
            - centre axle drawbar
            - semi-car transporter
            - semi-trailer
            - long semi-trailer
            - low loader
            - other
            - drawbar
            - four-in-line
            - dolly
            - full drawbar
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        brakes:
          $ref: '#/components/schemas/brakes'
        axles:
          $ref: '#/components/schemas/axles'
        recordCompleteness:
          type: string
          description: Defines the level of completeness for a tech record. If it is set to "skeleton" then it means the vehicle does not meet the minimum requirements to be tested. If it is "testable" it means the vehicle meets the minimum requirements to be tested but is not complete from a business perspective. If "complete" then the vehicle it is complete form a business perspective also.

    techRecordsPUT_POST:
      type: array
      items:
        $ref: '#/components/schemas/techRecordPUT_POST'
    techRecordPUT_POST:
      type: object
      properties:
        vehicleType:
          type: string
          enum:
            - psv
            - hgv
            - trl
        regnDate:
          type: string
          format: date
          description: Used only for PSV and HGV
        manufactureYear:
          type: number
          maximum: 9999
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        noOfAxles:
          type: number
          maximum: 99
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        dtpNumber:
          type: string
          maxLength: 6
          description: Used only for HGV and TRL
        speedLimiterMrk:
          type: boolean
          description: Used only for PSV and HGV
        tachoExemptMrk:
          type: boolean
          description: Used only for PSV and HGV
        drawbarCouplingFitted:
          type: boolean
          description: Used only for HGV
        euroStandard:
          type: string
          description: Used only for HGV
        fuelPropulsionSystem:
          type: string
          enum:
            - DieselPetrol
            - Diesel
            - Petrol
            - Hybrid
            - Electric
            - CNG
            - Fuel cell
            - LNG
            - Other
        offRoad:
          type: boolean
        roadFriendly:
          type: boolean
          description: Used only for HGV and TRL
        vehicleClass:
          type: object
          properties:
            code:
              type: string
              nullable: true
              enum:
                - '2'
                - 'n'
                - 's'
                - '1'
                - 't'
                - 'l'
                - '3'
                - 'v'
                - '4'
                - '7'
                - '5'
            description:
              type: string
              enum:
                - motorbikes over 200cc or with a sidecar
                - not applicable
                - small psv (ie: less than or equal to 22 seats)
                - motorbikes up to 200cc
                - trailer
                - large psv(ie: greater than 23 seats)
                - 3 wheelers
                - heavy goods vehicle
                - MOT class 4
                - MOT class 7
                - MOT class 5
          description: >-
            Used for all vehicle types - PSV, HGV and TRL. 2 = MotorBikes over
            200cc or with a sidecar, N = Not Applicable, S = Small PSV i.e less
            than or equal to 22 seats, 1 = Motorbikes upto 200cc, T = Trailer, L
            = LARGE PSV (ie. greater than 23 seats), 3 = 3 wheelers, V = Heavy
            Goods Vehicle
        vehicleConfiguration:
          type: string
          enum:
            - rigid
            - articulated
            - centre axle drawbar
            - semi-car transporter
            - semi-trailer
            - long semi-trailer
            - low loader
            - other
            - drawbar
            - four-in-line
            - dolly
            - full drawbar
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        numberOfWheelsDriven:
          type: number
          maximum: 9999
        euVehicleCategory:
          type: string
          enum:
            - m1
            - m2
            - m3
            - n1
            - n2
            - n3
            - o1
            - o2
            - o3
            - o4
        emissionsLimit:
          type: number
          maximum: 99
          nullable: true
        departmentalVehicleMarker:
          type: boolean
          nullable: true
        alterationMarker:
          type: boolean
          nullable: true
        approvalType:
          type: string
          enum:
            - NTA
            - ECTA
            - IVA
            - NSSTA
            - ECSSTA
        approvalTypeNumber:
          type: string
          maxLength: 25
          nullable: true
        variantNumber:
          type: string
          maxLength: 25
          nullable: true
        variantVersionNumber:
          type: string
          maxLength: 35
          nullable: true
        grossEecWeight:
          type: number
          minLength: 0
          maxLength: 5
          nullable: true
        trainEecWeight:
          type: number
          maximum: 99999
          nullable: true
        maxTrainEecWeight:
          type: number
          maxLength: 99999
          nullable: true
        make:
          type: string
          maxLength: 30
          description: Used only for HGV and TRL
        model:
          type: string
          maxLength: 30
          description: Used only for HGV and TRL
        functionCode:
          type: string
          maxLength: 1
          description: Used only for HGV. Optional
        bodyType:
          type: object
          properties:
            code:
              type: string
              enum:
                - a
                - s
                - d
                - o
                - m
                - x
                - p
                - k
                - t
                - b
                - f
                - r
                - c
            description:
              type: string
              enum:
                - articulated
                - single decker
                - double decker
                - other
                - petrol/oil tanker
                - skeletal
                - tipper
                - box
                - flat
                - refuse
                - skip loader
                - refrigerated
          description: >-
            Used for all vehicle types - PSV, HGV and TRL. o = other, a =
            articulated, m = other, s = single decker, d = double decker, x =
            other, p = petrol/oil tanker, k = skeletal, t = tipper, b = box, f =
            flat, r = refuse, s = skip loader (for HGV and TRL), c = refrigerated
        conversionRefNo:
          type: string
          maxLength: 10
          description: 'Used for all vehicle types - PSV, HGV and TRL. Optional for HGV'
        grossGbWeight:
          type: number
          minLength: 0
          maxLength: 5
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        grossDesignWeight:
          type: number
          minLength: 0
          maxLength: 5
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        trainGbWeight:
          type: number
          maximum: 99999
          description: Used only for HGV
        trainDesignWeight:
          type: number
          maximum: 99999
          description: Used only for HGV
          nullable: true
        maxTrainGbWeight:
          type: number
          maximum: 99999
          description: Used only for HGV
        maxTrainDesignWeight:
          type: number
          maximum: 99999
          description: Used only for HGV
          nullable: true
        tyreUseCode:
          type: string
          maxLength: 2
          description: Used only for HGV and TRL. Optional for HGV
        axles:
          type: array
          items:
            type: object
            properties:
              axleNumber:
                type: number
                maximum: 99999
                description: 'Used for all vehicle types - PSV, HGV and TRL'
              parkingBrakeMrk:
                type: boolean
                description: 'Used for all vehicle types - PSV, HGV and TRL. Optional for HGV'
              weights:
                type: object
                properties:
                  gbWeight:
                    type: number
                    maximum: 99999
                    description: 'Used for all vehicle types - PSV, HGV and TRL'
                  eecWeight:
                    type: number
                    maximum: 99999
                    nullable: true
                  designWeight:
                    type: number
                    maximum: 99999
                    description: 'Used for all vehicle types - PSV, HGV and TRL'
              tyres:
                type: object
                properties:
                  tyreCode:
                    type: number
                    maximum: 9999
                    description: 'Used for all vehicle types - PSV, HGV and TRL'
                  tyreSize:
                    type: string
                    maxLength: 12
                    description: 'Used for all vehicle types - PSV, HGV and TRL'
                  plyRating:
                    type: string
                    maxLength: 2
                    description: 'Used for all vehicle types - PSV, HGV and TRL. Optional for HGV'
                  fitmentCode:
                    type: string
                    enum:
                      - double
                      - single
                    description: 'Used for all vehicle types - PSV, HGV and TRL'
                  dataTrAxles:
                    type: number
                    maximum: 999
                    description: 'Used for all vehicle types - PSV, HGV and TRL. Optional for HGV'
        dimensions:
          type: object
          properties:
            length:
              type: number
              maximum: 99999
              description: Used only for HGV and TRL
            width:
              type: number
              maximum: 99999
              description: Used only for HGV and TRL
            axleSpacing:
              type: array
              description: Used only for HGV and TRL
              items:
                type: object
                properties:
                  axles:
                    type: string
                    nullable: true
                  value:
                    type: number
                    maximum: 99999
                    description: Optional for HGV
        frontAxleTo5thWheelMin:
          type: number
          maximum: 99999
          description: Used only for HGV
        frontAxleTo5thWheelMax:
          type: number
          maximum: 99999
          description: Used only for HGV
        frontVehicleTo5thWheelCouplingMin:
          type: number
          maximum: 99999
          description: Used only for HGV. Optional for HGV
        frontVehicleTo5thWheelCouplingMax:
          type: number
          maximum: 99999
          description: Used only for HGV. Optional for HGV
        frontAxleToRearAxle:
          type: number
          maximum: 99999
          description: Used only for HGV and TRL
        ntaNumber:
          type: string
          maxLength: 40
          description: 'Used for all vehicle types - PSV, HGV and TRL'
          nullable: true
        notes:
          type: string
          description: Used only for HGV and TRL. Optional for HGV
        applicantDetails:
          $ref: '#/components/schemas/applicantDetailsProperties'
        microfilm:
          $ref: '#/components/schemas/microfilm'
        plates:
          $ref: '#/components/schemas/plates'
        reasonForCreation:
          type: string
          maxLength: 60
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        adrDetails:
          $ref: '#/components/schemas/adrDetails'
    adrDetails:
      type: object
      nullable: true
      description: Used only for HGV and TRL
      properties:
        vehicleDetails:
          type: object
          properties:
            type:
              type: string
              description: >-
                Mandatory. Users must select ONE of these. Users cannot select
                less/more
            approvalDate:
              type: string
              description: Date (YYYY-MM-DD)
              format: date
        listStatementApplicable:
          type: boolean
          description: >-
            Optional. Applicable only if vehicleDetails.type contains the word ‘battery’.
        batteryListNumber:
          type: string
          maxLength: 8
          description: >-
            Mandatory if listStatementApplicable is true, therefore applicable only if vehicleDetails.type contains the word ‘battery’. Else N/A
        declarationsSeen:
          type: boolean
          nullable: true
          description: Optional for all vehicle types
        brakeDeclarationsSeen:
          type: boolean
          nullable: true
          description: Optional for all vehicle types
        brakeDeclarationIssuer:
          type: string
          nullable: true
          description: Optional for all vehicle types
        brakeEndurance:
          type: boolean
          nullable: true
          description: Optional for all vehicle types
        weight:
          type: string
          maxLength: 8
          description: >-
            Mandatory if brakeEndurance = true, else N/A
        compatibilityGroupJ:
          type: boolean
          nullable: true
          description: Optional for all vehicle types
        documents:
          type: array
          items:
            type: string
          description: >-
            Optional. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
        permittedDangerousGoods:
          type: array
          description: >-
            Mandatory. Users must select, AT LEAST ONE of these. However, users
            CAN select more than one
          items:
            type: string
        additionalExaminerNotes:
          type: string
          maxLength: 1024
          description: Optional for all vehicle types
          nullable: true
        applicantDetails:
          type: object
          properties:
            name:
              type: string
              maxLength: 150
            street:
              type: string
              maxLength: 150
            town:
              type: string
              maxLength: 100
            city:
              type: string
              maxLength: 100
            postcode:
              type: string
              maxLength: 25
        memosApply:
          type: array
          items:
            type: string
            description: >-
              Optional. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
        additionalNotes:
          type: object
          properties:
            number:
              type: array
              nullable: true
              description: Optional for all vehicle types
              items:
                type: string
            guidanceNotes:
              type: array
              nullable: true
              description: Optional for all vehicle types
              items:
                type: string
        adrTypeApprovalNo:
          type: string
          nullable: true
        tank:
          type: object
          nullable: true
          properties:
            tankDetails:
              type: object
              properties:
                tankManufacturer:
                  type: string
                  maxLength: 70
                  description: >-
                    Mandatory. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                yearOfManufacture:
                  type: number
                  maxLength: 4
                  description: >-
                    Mandatory. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                tankCode:
                  type: string
                  maxLength: 30
                  description: >-
                    Mandatory. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                specialProvisions:
                  type: string
                  maxLength: 1024
                  nullable: true
                  description: >-
                    Optional. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                tankManufacturerSerialNo:
                  type: string
                  maxLength: 50
                  description: >-
                    Mandatory. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                tankTypeAppNo:
                  type: string
                  maxLength: 65
                  description: >-
                    Mandatory. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                tc2Details:
                  type: object
                  properties:
                    tc2Type:
                      type: string
                      description: >-
                        Optional. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                      enum:
                        - initial
                    tc2IntermediateApprovalNo:
                      type: string
                      maxLength: 70
                      description: >-
                        Optional. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                    tc2IntermediateExpiryDate:
                      type: string
                      format: date
                      description: >-
                        Optional. Date(YYYY-MM-DD). Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                tc3Details:
                  type: array
                  items:
                    type: object
                    properties:
                      tc3Type:
                        type: string
                        description: >-
                          Optional. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                        enum:
                          - intermediate
                          - periodic
                          - exceptional
                      tc3PeriodicNumber:
                        type: string
                        maxLength: 75
                        description: >-
                          Optional. Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
                      tc3PeriodicExpiryDate:
                        type: string
                        format: date
                        description: >-
                          Optional. Date(YYYY-MM-DD). Applicable only if vehicleDetails.type contains the word ‘tank’ or ‘battery’.
            tankStatement:
              type: object
              properties:
                substancesPermitted:
                  type: string
                  description: >-
                    Mandatory IF vehicleDetails.type contains the word ‘tank’ or ‘battery’ ELSE, optional. If mandatory, users must select ONE of
                    these. Users cannot select less/more than one
                statement:
                  type: string
                  nullable: true
                  maxLength: 1500
                  description: >-
                    Optional. Applicable only IF vehicleDetails.type contains the word ‘tank’ or ‘battery’
                productListRefNo:
                  type: string
                  nullable: true
                  description: >-
                    Optional. Applicable only IF vehicleDetails.type contains the word ‘tank’ or ‘battery’
                productListUnNo:
                  type: array
                  nullable: true
                  description: 'Optional. Applicable only IF vehicleDetails.type contains the word ‘tank’ or ‘battery’'
                  items:
                    type: string
                productList:
                  type: string
                  maxLength: 1500
                  description: >-
                    Optional. Applicable only IF vehicleDetails.type contains the word ‘tank’ or ‘battery’
                  nullable: true
    brakes:
      type: object
      properties:
        brakeCodeOriginal:
          type: string
          maxLength: 3
          description: Used only for PSV
        brakeCode:
          type: string
          maxLength: 6
          description: Used only for PSV
        dataTrBrakeOne:
          type: string
          maxLength: 60
          description: Used only for PSV
        dataTrBrakeTwo:
          type: string
          maxLength: 60
          description: Used only for PSV
        dataTrBrakeThree:
          type: string
          maxLength: 60
          description: Used only for PSV
        retarderBrakeOne:
          type: string
          enum:
            - electric
            - exhaust
            - friction
            - hydraulic
            - other
            - none
          description: Used only for PSV
        retarderBrakeTwo:
          type: string
          enum:
            - electric
            - exhaust
            - friction
            - hydraulic
            - other
            - none
          description: Used only for PSV
        dtpNumber:
          type: string
          maxLength: 6
          description: Used only for HGV and TRL
        brakeForceWheelsNotLocked:
          $ref: '#/components/schemas/brakeForceWheelsNotLocked'
        brakeForceWheelsUpToHalfLocked:
          $ref: '#/components/schemas/brakeForceWheelsUpToHalfLocked'
        loadSensingValve:
          type: boolean
          description: Used only for TRL
        antilockBrakingSystem:
          type: boolean
          description: Used only for TRL
    brakeForceWheelsNotLocked:
      type: object
      properties:
        serviceBrakeForceA:
          type: number
          maximum: 99999
          description: Used only for PSV
        secondaryBrakeForceA:
          type: number
          maximum: 99999
          description: Used only for PSV
        parkingBrakeForceA:
          type: number
          maximum: 99999
          description: Used only for PSV
    brakeForceWheelsUpToHalfLocked:
      type: object
      properties:
        serviceBrakeForceB:
          type: number
          maximum: 99999
          description: Used only for PSV
        secondaryBrakeForceB:
          type: number
          maximum: 99999
          description: Used only for PSV
        parkingBrakeForceB:
          type: number
          maximum: 99999
          description: Used only for PSV
    axles:
      type: array
      items:
        $ref: '#/components/schemas/weights'
    weights:
      type: object
      properties:
        axleNumber:
          type: number
          maximum: 99999
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        parkingBrakeMrk:
          type: boolean
          nullable: true
          description: 'Used for all vehicle types - PSV, HGV and TRL. Optional for HGV'
        weights:
          $ref: '#/components/schemas/axleWeightProperties'
        tyres:
          $ref: '#/components/schemas/axleTyreProperties'
        brakes:
          $ref: '#/components/schemas/axleBrakeProperties'
    axleWeightProperties:
      type: object
      properties:
        kerbWeight:
          type: number
          maximum: 99999
          description: Used only for PSV
        ladenWeight:
          type: number
          maximum: 99999
          description: Used only for PSV
        gbWeight:
          type: number
          maximum: 99999
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        eecWeight:
          type: number
          maximum: 99999
          nullable: true
        designWeight:
          type: number
          maximum: 99999
          description: 'Used for all vehicle types - PSV, HGV and TRL'
    plates:
      type: array
      nullable: true
      items:
        type: object
        properties:
          plateSerialNumber:
            type: string
            maxLength: 12
            nullable: true
          plateIssueDate:
            type: string
            format: date
            nullable: true
          plateReasonForIssue:
            type: string
            enum:
              - Free replacement
              - Replacement
              - Destroyed
              - Provisional
              - Original
              - Manual
            nullable: true
          plateIssuer:
            type: string
            maxLength: 150
            nullable: true
    microfilm:
      type: object
      properties:
        microfilmDocumentType:
          type: string
          nullable: true
          enum:
            - PSV Miscellaneous
            - AAT - Trailer Annual Test
            - AIV - HGV International App
            - COIF Modification
            - Trailer COC + Int Plate
            - RCT - Trailer Test Cert paid
            - HGV COC + Int Plate
            - PSV Carry/Auth
            - OMO Report
            - AIT - Trailer International App
            - IPV - HGV EEC Plate/Cert
            - XCV - HGV Test Cert free
            - AAV - HGV Annual Test
            - COIF Master
            - Tempo 100 Sp Ord
            - Deleted
            - PSV N/ALT
            - XPT - Tr Plating Cert paid
            - FFV - HGV First Test
            - Repl Vitesse 100
            - TCV - HGV Test Cert
            - ZZZ -  Miscellaneous
            - Test Certificate
            - XCT - Trailer Test Cert free
            - C52 - COC and VTG52A
            - Tempo 100 Report
            - Main File Amendment
            - PSV Doc
            - PSV COC
            - PSV Repl COC
            - TAV - COC
            - NPT - Trailer Alteration
            - OMO Certificate
            - PSV Repl COIF
            - PSV Repl COF
            - COIF Application
            - XPV - HGV Plating Cert Free
            - TCT  - Trailer Test Cert
            - Tempo 100 App
            - PSV Decision on N/ALT
            - Special Order PSV
            - NPV - HGV Alteration
            - No Description Found
            - Vitesse 100 Sp Ord
            - Brake Test Details
            - COIF Productional
            - RDT - Test Disc Paid
            - RCV -  HGV Test Cert
            - FFT -  Trailer First Test
            - IPT - Trailer EEC Plate/Cert
            - XDT - Test Disc Free
            - PRV - HGV Plating Cert paid
            - COF Cert
            - PRT - Tr Plating Cert paid
            - Tempo 100 Permit
        microfilmRollNumber:
          type: string
          maxLength: 5
          nullable: true
        microfilmSerialNumber:
          type: string
          maxLength: 4
          nullable: true
    applicantDetailsProperties:
      type: object
      properties:
        name:
          type: string
          maxLength: 150
        address1:
          type: string
          maxLength: 60
        address2:
          type: string
          maxLength: 60
          nullable: true
        postTown:
          type: string
          maxLength: 60
        address3:
          type: string
          maxLength: 60
          nullable: true
        postCode:
          type: string
          maxLength: 12
          nullable: true
        emailAddress:
          type: string
          maxLength: 255
          nullable: true
        telephoneNumber:
          type: string
          maxLength: 25
    axleTyreProperties:
      type: object
      properties:
        tyreSize:
          type: string
          maxLength: 12
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        plyRating:
          type: string
          maxLength: 2
          description: 'Used for all vehicle types - PSV, HGV and TRL. Optional for HGV'
        fitmentCode:
          type: string
          enum:
            - double
            - single
          description: 'Used for all vehicle types - PSV, HGV and TRL'
        dataTrAxles:
          type: number
          maximum: 999
          description: 'Used for all vehicle types - PSV, HGV and TRL. Optional for HGV'
        speedCategorySymbol:
          type: string
          nullable: true
          enum:
            - a7
            - a8
            - b
            - c
            - d
            - e
            - f
            - g
            - j
            - k
            - l
            - m
            - n
            - p
            - q
          description: Used only for PSV
        tyreCode:
          type: number
          maximum: 9999
          description: 'Used for all vehicle types - PSV, HGV and TRL'
    axleBrakeProperties:
      type: object
      description: Used only for TRL
      properties:
        brakeActuator:
          type: number
          maximum: 999
        leverLength:
          type: number
          maximum: 999
        springBrakeParking:
          type: boolean
security:
  - ApiKeyAuth: []
  - OAuth2:
      - read
      - write
servers:
  - url: 'https://url/api/v1'
